{"version":3,"file":"static/js/login.26a2bfae.js","mappings":"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","sources":["webpack://yunmusic-app/./src/views/login/index.vue?a107","webpack://yunmusic-app/./src/api/personnal/login/index.js","webpack://yunmusic-app/./src/utils/auth.js","webpack://yunmusic-app/./src/views/login/index.vue","webpack://yunmusic-app/./src/views/login/index.vue?daa7","webpack://yunmusic-app/./node_modules/vant/es/nav-bar/NavBar.mjs","webpack://yunmusic-app/./node_modules/vant/es/nav-bar/index.mjs"],"sourcesContent":["import { resolveComponent as _resolveComponent, createVNode as _createVNode, withCtx as _withCtx, openBlock as _openBlock, createBlock as _createBlock, createCommentVNode as _createCommentVNode, createTextVNode as _createTextVNode, createElementVNode as _createElementVNode, createElementBlock as _createElementBlock } from \"vue\";\nconst _hoisted_1 = {\n  style: {\n    \"margin\": \"16px\"\n  }\n};\n\nconst _hoisted_2 = /*#__PURE__*/_createTextVNode(\" 下一步 \");\n\nconst _hoisted_3 = /*#__PURE__*/_createTextVNode(\" 登录 \");\n\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_van_icon = _resolveComponent(\"van-icon\");\n\n  const _component_van_nav_bar = _resolveComponent(\"van-nav-bar\");\n\n  const _component_van_field = _resolveComponent(\"van-field\");\n\n  const _component_van_cell_group = _resolveComponent(\"van-cell-group\");\n\n  const _component_van_button = _resolveComponent(\"van-button\");\n\n  const _component_van_form = _resolveComponent(\"van-form\");\n\n  return _openBlock(), _createElementBlock(\"div\", null, [_createVNode(_component_van_nav_bar, {\n    title: \"登录\",\n    \"left-text\": \"返回\",\n    \"left-arrow\": \"\",\n    onClickLeft: $options.goHome\n  }, {\n    right: _withCtx(() => [_createVNode(_component_van_icon, {\n      name: \"search\",\n      size: \"18\"\n    })]),\n    _: 1\n  }, 8, [\"onClickLeft\"]), _createVNode(_component_van_form, {\n    onSubmit: _ctx.onSubmit\n  }, {\n    default: _withCtx(() => [_createVNode(_component_van_cell_group, {\n      inset: \"\"\n    }, {\n      default: _withCtx(() => [!$data.next ? (_openBlock(), _createBlock(_component_van_field, {\n        key: 0,\n        modelValue: $data.user.phone,\n        \"onUpdate:modelValue\": _cache[0] || (_cache[0] = $event => $data.user.phone = $event),\n        name: \"手机号\",\n        label: \"手机号\",\n        type: \"tel\",\n        placeholder: \"手机号\",\n        rules: [{\n          required: true,\n          message: '请填写手机号'\n        }]\n      }, null, 8, [\"modelValue\"])) : _createCommentVNode(\"\", true), $data.next ? (_openBlock(), _createBlock(_component_van_field, {\n        key: 1,\n        modelValue: $data.user.captcha,\n        \"onUpdate:modelValue\": _cache[1] || (_cache[1] = $event => $data.user.captcha = $event),\n        type: \"number\",\n        name: \"验证码\",\n        label: \"验证码\",\n        placeholder: \"验证码\",\n        rules: [{\n          required: false,\n          message: '请填写验证码'\n        }]\n      }, null, 8, [\"modelValue\"])) : _createCommentVNode(\"\", true)]),\n      _: 1\n    }), _createElementVNode(\"div\", _hoisted_1, [!$data.next ? (_openBlock(), _createBlock(_component_van_button, {\n      key: 0,\n      round: \"\",\n      block: \"\",\n      type: \"primary\",\n      onClick: $options.clickNext\n    }, {\n      default: _withCtx(() => [_hoisted_2]),\n      _: 1\n    }, 8, [\"onClick\"])) : _createCommentVNode(\"\", true), $data.next ? (_openBlock(), _createBlock(_component_van_button, {\n      key: 1,\n      round: \"\",\n      block: \"\",\n      type: \"primary\",\n      onClick: $options.doLogin\n    }, {\n      default: _withCtx(() => [_hoisted_3]),\n      _: 1\n    }, 8, [\"onClick\"])) : _createCommentVNode(\"\", true)])]),\n    _: 1\n  }, 8, [\"onSubmit\"])]);\n}","import request from \"@/api/request\";\r\n// 登录\r\nfunction login(data) {\r\n  return request({\r\n    url: \"/login/cellphone\",\r\n    method: \"GET\",\r\n    data,\r\n  });\r\n}\r\n\r\nfunction sendCode(data){\r\n    return request({\r\n        url: \"/captcha/sent\",\r\n        method: \"GET\",\r\n        data,\r\n      });\r\n}\r\n\r\nexport { login,sendCode };\r\n","const TOKEN_NAME = 'music-token'\r\nconst USER_INFO_NAME = 'music-userInfo'\r\n// 注意!!! localStorage 只能存储字符串\r\n// 存token\r\nexport function setToken(token) {\r\n  // console.log('token', token)\r\n  window.localStorage.setItem(TOKEN_NAME, token)\r\n}\r\n// 存userInfo\r\nexport function setUserInfo(userInfo) {\r\n  window.localStorage.setItem(USER_INFO_NAME, JSON.stringify(userInfo))\r\n}\r\n// 获取token\r\nexport function getToken() {\r\n  return window.localStorage.getItem(TOKEN_NAME)\r\n}\r\n// 获取user_info\r\nexport function getUserInfo() {\r\n  return JSON.parse(window.localStorage.getItem(USER_INFO_NAME))\r\n}\r\n\r\n// 删除token\r\nexport function removeToken() {\r\n  return window.localStorage.removeItem(TOKEN_NAME)\r\n}\r\n// 删除用户\r\nexport function removeUserInfo() {\r\n  return window.localStorage.removeItem(USER_INFO_NAME)\r\n}\r\n// 全部删除\r\nexport function clearAll() {\r\n  removeToken()\r\n  removeUserInfo()\r\n}\r\n","// @ is an alias to /src\nimport { Toast } from \"vant\";\nimport { login, sendCode } from \"@/api/personnal/login/index.js\";\nimport { setToken, setUserInfo } from \"@/utils/auth.js\";\nexport default {\n  name: \"Login\",\n  components: {},\n\n  data() {\n    return {\n      user: {\n        phone: 18538370152,\n        captcha: \"\",\n        password: \"506319.com\"\n      },\n      next: false\n    };\n  },\n\n  async created() {},\n\n  methods: {\n    goHome() {\n      this.$router.push({\n        path: \"/home\"\n      });\n    },\n\n    async clickNext() {\n      this.next = !this.next;\n      const res = await sendCode({\n        phone: this.user.phone\n      });\n      console.log(res);\n    },\n\n    // 登录\n    async doLogin() {\n      const resLogin = await login(this.user);\n      setUserInfo(resLogin);\n      setToken(resLogin.token);\n      Toast(\"登录成功\");\n      this.$router.back();\n      console.log(resLogin);\n    }\n\n  }\n};","/* unplugin-vue-components disabled */import { render } from \"./index.vue?vue&type=template&id=029cd01c\"\nimport script from \"./index.vue?vue&type=script&lang=js\"\nexport * from \"./index.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"D:\\\\项目\\\\nodeMusic\\\\yunmusic-app\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { createVNode as _createVNode } from \"vue\";\nimport { ref, defineComponent } from \"vue\";\nimport { truthProp, numericProp, BORDER_BOTTOM, getZIndexStyle, createNamespace, HAPTICS_FEEDBACK } from \"../utils/index.mjs\";\nimport { usePlaceholder } from \"../composables/use-placeholder.mjs\";\nimport { Icon } from \"../icon/index.mjs\";\nconst [name, bem] = createNamespace(\"nav-bar\");\nconst navBarProps = {\n  title: String,\n  fixed: Boolean,\n  zIndex: numericProp,\n  border: truthProp,\n  leftText: String,\n  rightText: String,\n  leftArrow: Boolean,\n  placeholder: Boolean,\n  safeAreaInsetTop: Boolean\n};\nvar stdin_default = defineComponent({\n  name,\n  props: navBarProps,\n  emits: [\"click-left\", \"click-right\"],\n  setup(props, {\n    emit,\n    slots\n  }) {\n    const navBarRef = ref();\n    const renderPlaceholder = usePlaceholder(navBarRef, bem);\n    const onClickLeft = (event) => emit(\"click-left\", event);\n    const onClickRight = (event) => emit(\"click-right\", event);\n    const renderLeft = () => {\n      if (slots.left) {\n        return slots.left();\n      }\n      return [props.leftArrow && _createVNode(Icon, {\n        \"class\": bem(\"arrow\"),\n        \"name\": \"arrow-left\"\n      }, null), props.leftText && _createVNode(\"span\", {\n        \"class\": bem(\"text\")\n      }, [props.leftText])];\n    };\n    const renderRight = () => {\n      if (slots.right) {\n        return slots.right();\n      }\n      return _createVNode(\"span\", {\n        \"class\": bem(\"text\")\n      }, [props.rightText]);\n    };\n    const renderNavBar = () => {\n      const {\n        title,\n        fixed,\n        border,\n        zIndex\n      } = props;\n      const style = getZIndexStyle(zIndex);\n      const hasLeft = props.leftArrow || props.leftText || slots.left;\n      const hasRight = props.rightText || slots.right;\n      return _createVNode(\"div\", {\n        \"ref\": navBarRef,\n        \"style\": style,\n        \"class\": [bem({\n          fixed\n        }), {\n          [BORDER_BOTTOM]: border,\n          \"van-safe-area-top\": props.safeAreaInsetTop\n        }]\n      }, [_createVNode(\"div\", {\n        \"class\": bem(\"content\")\n      }, [hasLeft && _createVNode(\"div\", {\n        \"class\": [bem(\"left\"), HAPTICS_FEEDBACK],\n        \"onClick\": onClickLeft\n      }, [renderLeft()]), _createVNode(\"div\", {\n        \"class\": [bem(\"title\"), \"van-ellipsis\"]\n      }, [slots.title ? slots.title() : title]), hasRight && _createVNode(\"div\", {\n        \"class\": [bem(\"right\"), HAPTICS_FEEDBACK],\n        \"onClick\": onClickRight\n      }, [renderRight()])])]);\n    };\n    return () => {\n      if (props.fixed && props.placeholder) {\n        return renderPlaceholder(renderNavBar);\n      }\n      return renderNavBar();\n    };\n  }\n});\nexport {\n  stdin_default as default\n};\n","import { withInstall } from \"../utils/index.mjs\";\nimport _NavBar from \"./NavBar.mjs\";\nconst NavBar = withInstall(_NavBar);\nvar stdin_default = NavBar;\nexport {\n  NavBar,\n  stdin_default as default\n};\n"],"names":["_hoisted_1","style","_hoisted_2","_hoisted_3","render","_ctx","_cache","$props","$setup","$data","$options","_component_van_icon","_component_van_nav_bar","_component_van_field","_component_van_cell_group","_component_van_button","_component_van_form","title","onClickLeft","goHome","right","name","size","_","onSubmit","default","inset","next","key","modelValue","user","phone","$event","label","type","placeholder","rules","required","message","captcha","round","block","onClick","clickNext","doLogin","login","data","request","url","method","sendCode","TOKEN_NAME","USER_INFO_NAME","setToken","token","window","localStorage","setItem","setUserInfo","userInfo","JSON","stringify","components","password","async","methods","this","$router","push","path","res","console","log","resLogin","back","__exports__","bem","createNamespace","navBarProps","String","fixed","Boolean","zIndex","numericProp","border","truthProp","leftText","rightText","leftArrow","safeAreaInsetTop","stdin_default","defineComponent","props","emits","setup","emit","slots","navBarRef","ref","renderPlaceholder","usePlaceholder","event","onClickRight","renderLeft","left","_createVNode","Icon","renderRight","renderNavBar","getZIndexStyle","hasLeft","hasRight","BORDER_BOTTOM","HAPTICS_FEEDBACK","NavBar","withInstall","_NavBar"],"sourceRoot":""}